{"ast":null,"code":"export {};","map":{"version":3,"names":[],"sources":["C:\\Users\\otavi\\ionic\\testPHPMOIO\\src\\app\\modal-permissao\\modal-permissao.page.ts"],"sourcesContent":["import { ModalController, NavController, AlertController } from '@ionic/angular';\nimport { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport {funcao}\n\n@Component({\n  selector: 'app-modal-permissao',\n  templateUrl: './modal-permissao.page.html',\n  styleUrls: ['./modal-permissao.page.scss'],\n})\nexport class ModalPermissaoPage implements OnInit {\n  // banco de dados\n  nome: any;\n  email: any;\n  senha: any;\n  criarNew: any;\n  acessPermissao: any;\n  dados: any;\n\n  public fGroupPermissao: FormGroup;\n\n  constructor(\n    private navCtrl: NavController,\n    private modalCtrl: ModalController,\n    private fBuilder: FormBuilder,\n    private http: HttpClient,\n    private alertCtrl: AlertController\n  ) {\n    this.fGroupPermissao = this.fBuilder.group({\n      'nome': [null,\n        Validators.compose([\n        Validators.required,\n        Validators.minLength(2),\n        Validators.maxLength(100),\n      ])\n      ],\n      'emailPermissao': [null,\n        Validators.compose([\n          Validators.required,\n          Validators.pattern(\n            /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/\n          ),\n          Validators.minLength(4),\n          Validators.maxLength(100),\n        ])\n      ],\n      'criarNew': [null],\n      'acessPermissao': [null]\n    })\n  }\n\n  close() {\n    this.modalCtrl.dismiss();\n  }\n\n  async novaPermissao(){\n    //console.log(this.fGroupPermissao.value)\n\n    const nome = this.fGroupPermissao.value.nome;\n    const emailPermissao = this.fGroupPermissao.value.emailPermissao;\n    const criarNew = this.fGroupPermissao.value.criarNew;\n    const acessPermissao = this.fGroupPermissao.value.acessPermissao;\n    const url = `http://localhost/classes/criarNovaPermissao.php?nome=${nome}&emailPermissao=${emailPermissao}&criarNew=${criarNew}&acessPermissao=${acessPermissao}`;\n    const alertcadastrado = await this.alertCtrl.create({\n      header: \"Cadastrado com Sucesso!\",\n      buttons: ['Continuar',{\n        text:'Cancelar',\n        handler: () => {\n          this.navCtrl.navigateForward('modal-permissao');\n        }}]\n    });\n    const alertCancel = await this.alertCtrl.create({\n      header: \"Usuário já cadastrado no Sistema!\",\n      message: \"Digite novamente os dados!\",\n      buttons: ['OK']\n    });\n\n    this.http.get(url).subscribe(data => {\n      this.dados = data;\n        if (this.dados.status == \"cadastrado\"){\n        //aqui deu boa\n        // console.log('ok')\n        this.montaGrid()\n        alertcadastrado.present();\n      } else {\n        //aqui deu ruim\n        // console.log('recusado')\n        this.montaGrid()\n        alertCancel.present();\n      }\n    }, error => {\n      // Lide com erros aqui\n      console.error(error);\n    });\n\n  }\n\n\n\n  ngOnInit() {\n  }\n\n}\n"],"mappings":""},"metadata":{},"sourceType":"module","externalDependencies":[]}